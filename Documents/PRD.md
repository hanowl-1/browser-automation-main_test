# 제품 요구사항 문서 (PRD)
## 브라우저 자동화 플랫폼

### 1. 개요

이 프로젝트는 Browser Use 프레임워크를 기반으로 구축된 AI 기반 브라우저 자동화 플랫폼입니다. 대규모 언어 모델(LLM) 에이전트를 통해 지능적인 웹 상호작용을 가능하게 하여, 사용자가 전통적인 스크립팅 없이도 복잡한 웹 작업을 자동화할 수 있게 합니다. 이 플랫폼은 시각적 이해, 구조화된 데이터 추출, 다단계 작업 실행을 지원하는 기본 및 고급 자동화 기능을 모두 제공합니다.

### 2. 제품 개요

#### 2.1 제품 비전
사용자가 복잡한 스크립트 작성 대신 자연어로 작업을 설명할 수 있도록 하여 웹 자동화를 민주화하는 유연하고 AI 기반의 브라우저 자동화 플랫폼을 만듭니다.

#### 2.2 대상 사용자
- **개발자**: 웹 작업을 빠르게 자동화해야 하는 사용자
- **QA 엔지니어**: 자동화된 테스트 시나리오용
- **데이터 분석가**: 웹 스크래핑 및 데이터 수집용
- **비즈니스 사용자**: 반복적인 웹 기반 워크플로우용
- **연구원**: 정보 수집용

#### 2.3 핵심 가치 제안
- 자연어 작업 정의
- 웹 페이지의 시각적 이해
- 전통적인 스크립팅 불필요
- 구조화된 데이터 추출
- 봇 감지 회피를 위한 스텔스 모드

### 3. 기술 아키텍처

#### 3.1 기술 스택
- **핵심 프레임워크**: Browser Use (AI 기반 브라우저 자동화)
- **언어**: Python 3.11+
- **브라우저 엔진**: Playwright
- **LLM 제공자**: OpenAI (GPT-4), Anthropic (Claude), Google (Gemini)
- **패키지 관리**: UV (Astral)
- **환경 관리**: Python venv, dotenv

#### 3.2 시스템 구성요소

```
┌─────────────────────────────────────────────────────────┐
│                  사용자 인터페이스                       │
│           (명령줄 / Python API)                          │
└─────────────────────────────────────────────────────────┘
                            │
┌─────────────────────────────────────────────────────────┐
│                   에이전트 계층                          │
│         (작업 처리 및 오케스트레이션)                    │
├─────────────────────────────────────────────────────────┤
│  • 작업 파서          • 비전 프로세서                    │
│  • 컨트롤러           • 출력 포매터                      │
│  • 시스템 프롬프트    • 메모리 매니저                    │
└─────────────────────────────────────────────────────────┘
                            │
┌─────────────────────────────────────────────────────────┐
│                     LLM 계층                             │
│           (지능 및 의사결정)                             │
├─────────────────────────────────────────────────────────┤
│  • OpenAI GPT-4      • Anthropic Claude                  │
│  • Google Gemini     • 사용자 정의 모델                  │
└─────────────────────────────────────────────────────────┘
                            │
┌─────────────────────────────────────────────────────────┐
│                   브라우저 계층                          │
│             (웹 상호작용 엔진)                           │
├─────────────────────────────────────────────────────────┤
│  • Playwright 코어    • 브라우저 세션                    │
│  • 스텔스 모드        • 쿠키 관리                        │
│  • 프로필 저장소      • 네트워크 제어                    │
└─────────────────────────────────────────────────────────┘
```

### 4. 기능 사양

#### 4.1 핵심 기능

##### 4.1.1 기본 브라우저 자동화
- **설명**: 자연어 명령으로 간단한 작업 실행
- **구현**: `main.py`
- **주요 기능**:
  - 웹 탐색
  - 폼 입력
  - 클릭 상호작용
  - 텍스트 추출
  - 스크린샷 캡처

##### 4.1.2 고급 에이전트 구성
- **설명**: 완전한 사용자 정의가 가능한 복잡한 자동화
- **구현**: `advanced_agent.py` (계획됨)
- **주요 기능**:
  - 다단계 워크플로우
  - 조건부 로직
  - 오류 처리
  - 재시도 메커니즘
  - 상태 관리

##### 4.1.3 시각적 이해
- **설명**: 웹 페이지의 AI 기반 시각적 분석
- **구성**:
  - 비전 활성화/비활성화: `use_vision`
  - 세부 레벨: 'low', 'high', 'auto'
- **사용 사례**:
  - 선택자 없이 UI 요소 식별
  - 페이지 레이아웃 이해
  - 시각적 콘텐츠 읽기 (차트, 이미지)

##### 4.1.4 구조화된 데이터 추출
- **설명**: Pydantic 모델을 사용하여 미리 정의된 형식으로 데이터 추출
- **이점**:
  - 타입 안정성
  - 일관된 출력 형식
  - 다운스트림 시스템과의 쉬운 통합

#### 4.2 특수 구현

##### 4.2.1 카카오 채널 채팅 수집
- **파일**: `kakao1_login.py`
- **목적**: 카카오 채널 관리자 패널에서 채팅 대화 자동 수집
- **기능**:
  - 자격 증명으로 자동 로그인
  - reCAPTCHA 처리 지원
  - 시각적 분석을 사용한 읽지 않은 메시지 감지
  - 전체 대화 내역 로딩
  - JSON 형식 출력
  - Slack 웹훅 통합
  - 채팅 ID용 SPA 상태 추출

##### 4.2.2 TikTok Shop 제휴 액세스
- **파일**: `tiktok1_login.py`
- **목적**: TikTok Shop 제휴 플랫폼 자동 로그인
- **기능**:
  - 이메일/비밀번호 인증
  - CAPTCHA 처리
  - 세션 유지
  - 로그인 확인

### 5. 구성 및 사용자 정의

#### 5.1 에이전트 구성 옵션
```python
{
    'task': str,                    # 필수: 작업 설명
    'llm': ChatModel,              # 필수: LLM 인스턴스
    'use_vision': bool,            # 시각적 처리 (기본값: True)
    'vision_detail_level': str,    # 'low'|'high'|'auto'
    'controller': Controller,      # 사용자 정의 함수 레지스트리
    'save_conversation_path': str, # 대화 로깅
    'extend_system_message': str,  # 추가 지침
    'override_system_message': str # 시스템 프롬프트 교체
}
```

#### 5.2 브라우저 구성 옵션
```python
{
    'headless': bool,              # UI 없이 실행
    'channel': str,                # 브라우저 유형
    'executable_path': str,        # 사용자 정의 브라우저 경로
    'user_data_dir': str,         # 프로필 디렉토리
    'stealth': bool,              # 봇 감지 회피
    'viewport': dict,             # 창 크기
    'user_agent': str,            # 브라우저 식별
    'allowed_domains': list,      # 도메인 제한
    'proxy': dict,                # 네트워크 프록시
    'permissions': list,          # 브라우저 권한
    'deterministic_rendering': bool, # 일관된 렌더링
    'highlight_elements': bool,    # 상호작용 요소 표시
    'wait_for_network_idle_page_load_time': int # 네트워크 대기
}
```

### 6. 보안 및 개인정보 보호

#### 6.1 보안 조치
- API 키를 위한 환경 변수 저장
- 격리된 브라우저 프로필
- 도메인 제한 기능
- 하드코딩된 자격 증명 없음
- `.env` 파일에서 안전한 자격 증명 처리

#### 6.2 개인정보 보호 고려사항
- 세션 간 쿠키 격리
- 프로필 데이터 분리
- 선택적 헤드리스 모드
- 기본적으로 데이터 지속성 없음

### 7. 성능 최적화

#### 7.1 비용 최적화
- 비전 처리 토글 (이미지당 약 800-1000 토큰 절약)
- 세부 레벨 구성
- 선택적 페이지 요소 처리

#### 7.2 속도 최적화
- 더 빠른 실행을 위한 헤드리스 모드
- 네트워크 유휴 구성
- 병렬 작업 실행 지원

### 8. 사용 사례

#### 8.1 웹 스크래핑
- 뉴스 수집
- 가격 모니터링
- 제품 정보 추출
- 소셜 미디어 데이터 수집

#### 8.2 자동화된 테스팅
- 선택자 없는 UI 테스팅
- 크로스 브라우저 호환성
- 시각적 회귀 테스팅
- 폼 검증

#### 8.3 비즈니스 프로세스 자동화
- 보고서 생성
- 데이터 입력 자동화
- 고객 서비스 자동화
- 콘텐츠 검토

#### 8.4 연구 및 분석
- 시장 조사
- 경쟁사 분석
- 트렌드 모니터링
- 학술 데이터 수집

### 9. 개발 로드맵

#### 9.1 현재 상태 (v1.0)
- ✅ 기본 에이전트 구현
- ✅ 카카오 채널 통합
- ✅ TikTok Shop 통합
- ✅ 환경 구성
- ✅ 문서화

#### 9.2 계획된 기능 (v2.0)
- ⬜ 고급 에이전트 예제
- ⬜ 다중 브라우저 세션 관리
- ⬜ 작업 스케줄링
- ⬜ 웹 UI 대시보드
- ⬜ 플러그인 시스템
- ⬜ 향상된 오류 복구
- ⬜ 성능 메트릭
- ⬜ 테스트 스위트

#### 9.3 미래 비전 (v3.0)
- ⬜ 클라우드 배포 옵션
- ⬜ API 서비스 계층
- ⬜ 워크플로우 디자이너
- ⬜ 통합 마켓플레이스
- ⬜ 다중 에이전트 협업

### 10. 성공 지표

#### 10.1 기술적 지표
- 작업 완료율
- 평균 실행 시간
- 오류율
- 작업당 토큰 사용량
- 브라우저 리소스 사용량

#### 10.2 사용자 지표
- 수동 실행 대비 절약된 시간
- 자동화된 워크플로우 수
- 사용자 만족도 점수
- 학습 곡선 (첫 자동화까지의 시간)

### 11. 위험 및 완화

#### 11.1 기술적 위험
- **봇 감지**: 스텔스 모드와 인간과 유사한 동작으로 완화
- **웹사이트 변경**: 선택자 대신 시각적 이해로 처리
- **속도 제한**: 지연 및 재시도 로직으로 관리
- **CAPTCHA**: 수동 개입 지원

#### 11.2 운영상의 위험
- **API 비용**: 비전 토글과 세부 레벨로 제어
- **데이터 프라이버시**: 격리된 프로필과 안전한 저장소로 해결
- **브라우저 호환성**: Playwright 추상화를 통해 지원

### 12. 결론

이 브라우저 자동화 플랫폼은 깨지기 쉬운 선택자 기반 스크립트에서 지능적이고 적응 가능한 AI 에이전트로 이동하는 웹 자동화의 패러다임 전환을 나타냅니다. LLM과 시각적 이해를 활용함으로써 고급 사용자를 위한 강력한 기능을 제공하면서도 더 넓은 대상에게 웹 자동화를 접근 가능하게 만듭니다.

플랫폼의 모듈식 아키텍처와 광범위한 구성 옵션은 간단한 웹 스크래핑부터 복잡한 비즈니스 프로세스 자동화까지 다양한 사용 사례에 적응할 수 있도록 보장합니다. 계획된 개선 사항과 명확한 로드맵을 통해 이 플랫폼은 AI 기반 웹 자동화를 위한 포괄적인 솔루션이 될 것입니다.